<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YazÄ± DetayÄ± - Blog Projesi</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">ğŸš€ Blog Projesi</a>
            <a href="index.html" class="btn btn-outline-light btn-sm">â† Geri DÃ¶n</a>
        </div>
    </nav>

    <div class="container mt-5 mb-5">
        <div id="post-content" class="card shadow-lg mx-auto" style="max-width: 800px; display: none;">
            
            <img id="detail-image" src="" class="card-img-top" alt="Blog Resmi" style="height: 400px; object-fit: cover;">
            
            <div class="card-body p-5">
                <h1 id="detail-title" class="card-title mb-3 fw-bold display-6"></h1>
                <p class="text-muted border-bottom pb-3">
                    âœï¸ Yazar: <span id="detail-author" class="fw-bold text-dark"></span> 
                    | ğŸ“… Tarih: <span id="detail-date"></span>
                </p>

                <div id="detail-body" class="card-text mt-4 fs-5" style="line-height: 1.8;">
                    </div>
            </div>
        </div>

        <div id="message" class="text-center mt-5">
            <div class="spinner-border text-primary" role="status"></div>
            <p class="mt-2">YazÄ± yÃ¼kleniyor...</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const urlParams = new URLSearchParams(window.location.search);
            const postId = urlParams.get('id');
            
            const messageDiv = document.getElementById('message');
            const contentDiv = document.getElementById('post-content');

            if (!postId) {
                messageDiv.innerHTML = '<h3 class="text-danger">Hata: YazÄ± ID bulunamadÄ±!</h3>';
                return;
            }

            try {
                const response = await fetch(`http://localhost:3000/api/posts/${postId}`);
                
                if (!response.ok) {
                    throw new Error('YazÄ± bulunamadÄ±');
                }

                const post = await response.json();

                document.getElementById('detail-title').innerText = post.title;
                document.getElementById('detail-author').innerText = post.username;
                document.getElementById('detail-body').innerText = post.content;
                
                const date = new Date(post.created_at).toLocaleDateString('tr-TR', { 
                    year: 'numeric', month: 'long', day: 'numeric' 
                });
                document.getElementById('detail-date').innerText = date;

                const imgElement = document.getElementById('detail-image');
                if (post.image_url) {
                    imgElement.src = post.image_url;
                } else {
                    imgElement.src = 'https://via.placeholder.com/800x400?text=Blog+Resmi';
                }

                messageDiv.style.display = 'none';
                contentDiv.style.display = 'block';

            } catch (error) {
                console.error(error);
                messageDiv.innerHTML = '<h3 class="text-danger">YazÄ± bulunamadÄ± veya silinmiÅŸ. ğŸ˜”</h3><a href="index.html" class="btn btn-primary mt-3">Anasayfaya DÃ¶n</a>';
            }
        });
    </script>

</body>
</html>